<div class="container p-4">

  <h2>Tu entrenamiento - {{ fechaSeleccionada }}</h2>

  <div class="mb-3">
    <label for="fecha" class="form-label">Selecciona una fecha</label>
    <input id="fecha" type="date" class="form-control" [value]="fechaSeleccionada" (change)="onFechaSeleccionada($event)">
  </div>

  <div *ngIf="entrenamientoDelDia; else sinEntrenamiento">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Ejercicio</th>
          <th>Series</th>
          <th>Repeticiones</th>
          <th>Descanso (s)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let e of entrenamientoDelDia.ejercicios">
          <td>{{ e.nombre }}</td>
          <td>{{ e.series }}</td>
          <td>{{ e.repeticiones }}</td>
          <td>{{ e.descanso }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <ng-template #sinEntrenamiento>
    <p>No hay entrenamiento asignado para esta fecha.</p>
  </ng-template>

  <hr>

  <button class="btn btn-primary mb-3" (click)="abrirFormulario()">Registrar progreso</button>

  <div *ngIf="mostrandoFormulario" class="card p-3 mb-4">
    <h4>Registrar nuevo progreso</h4>
    <form [formGroup]="progresoForm" (ngSubmit)="enviarProgreso()">
      <div class="mb-3">
        <label for="fechaProgreso" class="form-label">Fecha</label>
        <input id="fechaProgreso" type="date" class="form-control" formControlName="fecha">
      </div>

      <div class="mb-3">
        <label for="peso" class="form-label">Peso (kg)</label>
        <input id="peso" type="number" step="0.1" class="form-control" formControlName="peso">
      </div>

      <div class="mb-3">
        <label for="grasa" class="form-label">Grasa corporal (%)</label>
        <input id="grasa" type="number" step="0.1" class="form-control" formControlName="grasaCorporal">
      </div>

      <button type="submit" class="btn btn-success me-2">Guardar</button>
      <button type="button" class="btn btn-secondary" (click)="cancelarFormulario()">Cancelar</button>
    </form>
  </div>

  <h3>Ãšltimos progresos</h3>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Peso (kg)</th>
        <th>Grasa corporal (%)</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of registrosProgreso">
        <td>{{ r.fecha }}</td>
        <td>{{ r.peso }}</td>
        <td>{{ r.grasaCorporal }}</td>
      </tr>
    </tbody>
  </table>

</div>
